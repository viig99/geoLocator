<html>
<head>
	<meta name="Author" content="Arjun Variar">
	<meta name="Version" content="1.0.10">
	<meta name="City" content="Hyderabad">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
	<script>
		$(window).load(function () {
			$("#ele2").hide();
		});
		function onButtonClickFunction() {
			$("#orangeButton").hide();
			$("#ele2").show();
			findMyDistanceFromThePoles();
		}

		function findMyDistanceFromThePoles() {
		navigator.geolocation.getCurrentPosition(doSomethingWithIt);
		}

		function doSomethingWithIt(result) {
			console.log(result);
			x2 = result.coords.latitude.toRad();
			y2 = result.coords.longitude.toRad();
			x1 = 0;
			y1 = 0;
			//x1 = 17.385044.toRad();     //Arjun's Lat
			//y1 = 78.486671.toRad();	  //Arjun's Long
			h = haverSine(x2-x1) + (Math.cos(x1) * Math.cos(x2) * haverSine(y2-y1));
			realDistance = findRealDistance(h);
			$("#ele2").html(realDistance.toFixed(2) + " km with an max error of "+(realDistance * 0.005).toFixed(2)+" km.")
		}

		function haverSine(theta) {
			return Math.pow(Math.sin(theta/2),2) ;
		}

		function findRealDistance(haverSineDistance) {
			Radius = 6371
			return 2 * Radius * Math.asin(Math.sqrt(haverSineDistance))
		}

		Number.prototype.toRad = function() {
			return this * Math.PI / 180;
		};
	</script>
	<title>GeoLocation</title>
</head>
<body>
	<div id="ele1" class="grass">Want to know your distance from the North Pole?</div>
	<div id="ele2" class="rback"></div>
	<input type="button" id="orangeButton" class="orangeButton" value="Sure!" placeholder="" onclick="onButtonClickFunction();">
</body>
</html>